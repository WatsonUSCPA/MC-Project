{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\what1\\\\OneDrive\\\\Desktop\\\\Project\\\\MCProject_Beta\\\\mc-square-react\\\\src\\\\Success.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useCart } from './CartContext';\nimport { getAuth, onAuthStateChanged } from 'firebase/auth';\nimport { getFirestore, doc, getDoc, updateDoc } from 'firebase/firestore';\nimport { app } from './firebase';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst db = getFirestore(app);\nconst auth = getAuth(app);\nconst Success = () => {\n  _s();\n  const {\n    clearCart\n  } = useCart();\n  // 購入商品・合計金額をlocalStorageから取得\n  const [orderItems, setOrderItems] = useState([]);\n  const [paidAmount, setPaidAmount] = useState(0);\n  const [usePoint, setUsePoint] = useState(0);\n  const [shipping, setShipping] = useState(0);\n  useEffect(() => {\n    // Stripeから直接情報を受け取る場合はここでAPIコール等を実装（今後拡張）\n    // 現状はlocalStorageから取得\n    try {\n      const itemsStr = localStorage.getItem('mcSquareLastOrderItems');\n      if (itemsStr) setOrderItems(JSON.parse(itemsStr));\n      const paidAmountStr = localStorage.getItem('mcSquareLastPaidAmount');\n      if (paidAmountStr) setPaidAmount(parseInt(paidAmountStr, 10));\n      const usePointStr = localStorage.getItem('mcSquareUsePoint');\n      if (usePointStr) setUsePoint(parseInt(usePointStr, 10));\n      const shippingStr = localStorage.getItem('mcSquareLastShipping');\n      if (shippingStr) setShipping(parseInt(shippingStr, 10));\n    } catch {}\n  }, []);\n\n  // grantPointsAndSaveOrderを外に出す\n  const grantPointsAndSaveOrder = async user => {\n    if (!user) return;\n    try {\n      const userRef = doc(db, 'users', user.uid);\n      const userSnap = await getDoc(userRef);\n      if (!userSnap.exists()) return;\n      let prevPoint = userSnap.data().point || 0;\n      // ポイント減算（使った分を引く）\n      if (usePoint > 0) {\n        prevPoint = Math.max(0, prevPoint - usePoint);\n        await updateDoc(userRef, {\n          point: prevPoint\n        });\n        console.log('ポイント使用:', usePoint, '残:', prevPoint);\n      }\n      // ポイント付与（支払金額-送料の100円ごとに1pt）\n      let addPoint = 0;\n      if (paidAmount > 0) {\n        const paidWithoutShipping = Math.max(0, paidAmount - shipping);\n        addPoint = Math.floor(paidWithoutShipping / 100);\n        await updateDoc(userRef, {\n          point: prevPoint + addPoint\n        });\n        console.log('ポイント付与:', addPoint, '合計:', prevPoint + addPoint);\n        prevPoint = prevPoint + addPoint;\n      }\n      // 購入履歴追加\n      if (orderItems.length > 0) {\n        const prevOrders = userSnap.data().orders || [];\n        const now = new Date();\n        const orderRecord = {\n          date: now.toISOString(),\n          items: orderItems,\n          total: paidAmount,\n          usedPoint: usePoint,\n          shipping: shipping,\n          grantedPoint: addPoint\n        };\n        await updateDoc(userRef, {\n          orders: [...prevOrders, orderRecord]\n        });\n        console.log('購入履歴追加:', orderRecord);\n      }\n      // ポイント付与・履歴追加後はlocalStorageをクリア\n      localStorage.removeItem('mcSquareLastPaidAmount');\n      localStorage.removeItem('mcSquareUsePoint');\n      localStorage.removeItem('mcSquareLastOrderItems');\n      localStorage.removeItem('mcSquareLastShipping');\n      localStorage.setItem('mcSquarePointGranted', '1'); // フラグを立てる\n    } catch (e) {\n      console.error('ポイント付与・履歴追加エラー:', e);\n    }\n  };\n\n  // 必要な情報が全て揃ったら履歴保存\n  useEffect(() => {\n    // ポイント付与・履歴追加フラグをリセット（決済ごとに必ずリセット）\n    localStorage.removeItem('mcSquarePointGranted');\n    if (localStorage.getItem('mcSquarePointGranted') === '1') {\n      clearCart();\n      localStorage.removeItem('mcSquareLastPaidAmount');\n      return;\n    }\n    clearCart();\n    // 全ての値が揃っているかチェック\n    if (orderItems.length > 0 && paidAmount !== null && shipping !== null && usePoint !== null) {\n      if (auth.currentUser) {\n        grantPointsAndSaveOrder(auth.currentUser);\n      } else {\n        const unsubscribe = onAuthStateChanged(auth, user => {\n          if (user) {\n            grantPointsAndSaveOrder(user);\n            unsubscribe();\n          }\n        });\n      }\n    }\n  }, [clearCart, orderItems, paidAmount, usePoint, shipping]);\n\n  // 小計計算\n  const subtotal = orderItems.reduce((sum, item) => {\n    const priceNum = Number(String(item.price).replace(/[^\\d.]/g, ''));\n    return sum + priceNum * item.quantity;\n  }, 0);\n\n  // 画像パス正規化\n  const getImageSrc = url => {\n    if (!url) return '/Image/MC square Logo.png';\n    if (url.startsWith('http://') || url.startsWith('https://')) return url;\n    if (url.startsWith('/Image/')) return url;\n    if (url.startsWith('Image/')) return '/' + url;\n    return '/Image/MC square Logo.png';\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: '3em 1em',\n      textAlign: 'center'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      style: {\n        color: '#E1306C',\n        marginBottom: '1em'\n      },\n      children: \"\\u3054\\u8CFC\\u5165\\u3042\\u308A\\u304C\\u3068\\u3046\\u3054\\u3056\\u3044\\u307E\\u3057\\u305F\\uFF01\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"\\u3054\\u6CE8\\u6587\\u304C\\u6B63\\u5E38\\u306B\\u5B8C\\u4E86\\u3057\\u307E\\u3057\\u305F\\u3002\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 24\n      }, this), \"\\u3054\\u767B\\u9332\\u306E\\u30E1\\u30FC\\u30EB\\u30A2\\u30C9\\u30EC\\u30B9\\u306B\\u78BA\\u8A8D\\u30E1\\u30FC\\u30EB\\u3092\\u304A\\u9001\\u308A\\u3057\\u3066\\u3044\\u307E\\u3059\\u3002\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 7\n    }, this), orderItems.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        margin: '2em auto',\n        maxWidth: 600,\n        background: '#fff',\n        borderRadius: 16,\n        boxShadow: '0 4px 16px rgba(255,159,124,0.10)',\n        padding: '2em'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          color: '#E1306C',\n          marginBottom: 16,\n          fontSize: '1.15em'\n        },\n        children: \"\\u3054\\u8CFC\\u5165\\u5546\\u54C1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        style: {\n          listStyle: 'none',\n          padding: 0,\n          margin: 0,\n          marginBottom: '1.5em'\n        },\n        children: orderItems.map((item, idx) => /*#__PURE__*/_jsxDEV(\"li\", {\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            gap: 14,\n            marginBottom: 18,\n            borderBottom: '1px solid #eee',\n            paddingBottom: 10\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: getImageSrc(item.imageUrl),\n            alt: item.name,\n            style: {\n              width: 48,\n              height: 48,\n              objectFit: 'cover',\n              borderRadius: 8,\n              border: '1px solid #eee',\n              background: '#fafafa'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              flex: 1,\n              textAlign: 'left'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontWeight: 700\n              },\n              children: item.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                color: '#636E72',\n                fontSize: '0.97em'\n              },\n              children: [\"\\u6570\\u91CF: \", item.quantity, \"\\u3000\\u5358\\u4FA1: \", Number(item.price).toLocaleString(), \"\\u5186\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 17\n          }, this)]\n        }, idx, true, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          borderTop: '2px solid #eee',\n          paddingTop: '1em'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            justifyContent: 'space-between',\n            marginBottom: '0.5em',\n            fontSize: '1em'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"\\u5C0F\\u8A08:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [subtotal.toLocaleString(), \"\\u5186\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            justifyContent: 'space-between',\n            marginBottom: '0.5em',\n            fontSize: '1em'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"\\u9001\\u6599:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: shipping === 0 ? '無料' : shipping.toLocaleString() + '円'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 13\n        }, this), usePoint > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            justifyContent: 'space-between',\n            marginBottom: '0.5em',\n            fontSize: '1em',\n            color: '#E1306C'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"\\u30DD\\u30A4\\u30F3\\u30C8\\u4F7F\\u7528:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\"-\", usePoint.toLocaleString(), \"\\u5186\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            justifyContent: 'space-between',\n            marginTop: '1em',\n            fontWeight: 700,\n            fontSize: '1.15em',\n            color: '#E1306C',\n            borderTop: '1px solid #eee',\n            paddingTop: '0.5em'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"\\u304A\\u652F\\u6255\\u3044\\u5408\\u8A08:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [paidAmount.toLocaleString(), \"\\u5186\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n      href: \"/all-products\",\n      style: {\n        display: 'inline-block',\n        marginTop: '2em',\n        color: '#fff',\n        background: '#E1306C',\n        padding: '0.8em 2em',\n        borderRadius: 8,\n        textDecoration: 'none',\n        fontWeight: 700\n      },\n      children: \"\\u5546\\u54C1\\u4E00\\u89A7\\u3078\\u623B\\u308B\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 128,\n    columnNumber: 5\n  }, this);\n};\n_s(Success, \"3Pi6wW+/mbU8GPvFnvSF15Yq/eE=\", false, function () {\n  return [useCart];\n});\n_c = Success;\nexport default Success;\nvar _c;\n$RefreshReg$(_c, \"Success\");","map":{"version":3,"names":["React","useEffect","useState","useCart","getAuth","onAuthStateChanged","getFirestore","doc","getDoc","updateDoc","app","jsxDEV","_jsxDEV","db","auth","Success","_s","clearCart","orderItems","setOrderItems","paidAmount","setPaidAmount","usePoint","setUsePoint","shipping","setShipping","itemsStr","localStorage","getItem","JSON","parse","paidAmountStr","parseInt","usePointStr","shippingStr","grantPointsAndSaveOrder","user","userRef","uid","userSnap","exists","prevPoint","data","point","Math","max","console","log","addPoint","paidWithoutShipping","floor","length","prevOrders","orders","now","Date","orderRecord","date","toISOString","items","total","usedPoint","grantedPoint","removeItem","setItem","e","error","currentUser","unsubscribe","subtotal","reduce","sum","item","priceNum","Number","String","price","replace","quantity","getImageSrc","url","startsWith","style","padding","textAlign","children","color","marginBottom","fileName","_jsxFileName","lineNumber","columnNumber","margin","maxWidth","background","borderRadius","boxShadow","fontSize","listStyle","map","idx","display","alignItems","gap","borderBottom","paddingBottom","src","imageUrl","alt","name","width","height","objectFit","border","flex","fontWeight","toLocaleString","borderTop","paddingTop","justifyContent","marginTop","href","textDecoration","_c","$RefreshReg$"],"sources":["C:/Users/what1/OneDrive/Desktop/Project/MCProject_Beta/mc-square-react/src/Success.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useCart } from './CartContext';\r\nimport { getAuth, onAuthStateChanged } from 'firebase/auth';\r\nimport { getFirestore, doc, getDoc, updateDoc } from 'firebase/firestore';\r\nimport { app } from './firebase';\r\n\r\nconst db = getFirestore(app);\r\nconst auth = getAuth(app);\r\n\r\nconst Success: React.FC = () => {\r\n  const { clearCart } = useCart();\r\n  // 購入商品・合計金額をlocalStorageから取得\r\n  const [orderItems, setOrderItems] = useState<any[]>([]);\r\n  const [paidAmount, setPaidAmount] = useState<number>(0);\r\n  const [usePoint, setUsePoint] = useState<number>(0);\r\n  const [shipping, setShipping] = useState<number>(0);\r\n\r\n  useEffect(() => {\r\n    // Stripeから直接情報を受け取る場合はここでAPIコール等を実装（今後拡張）\r\n    // 現状はlocalStorageから取得\r\n    try {\r\n      const itemsStr = localStorage.getItem('mcSquareLastOrderItems');\r\n      if (itemsStr) setOrderItems(JSON.parse(itemsStr));\r\n      const paidAmountStr = localStorage.getItem('mcSquareLastPaidAmount');\r\n      if (paidAmountStr) setPaidAmount(parseInt(paidAmountStr, 10));\r\n      const usePointStr = localStorage.getItem('mcSquareUsePoint');\r\n      if (usePointStr) setUsePoint(parseInt(usePointStr, 10));\r\n      const shippingStr = localStorage.getItem('mcSquareLastShipping');\r\n      if (shippingStr) setShipping(parseInt(shippingStr, 10));\r\n    } catch {}\r\n  }, []);\r\n\r\n  // grantPointsAndSaveOrderを外に出す\r\n  const grantPointsAndSaveOrder = async (user: any) => {\r\n    if (!user) return;\r\n    try {\r\n      const userRef = doc(db, 'users', user.uid);\r\n      const userSnap = await getDoc(userRef);\r\n      if (!userSnap.exists()) return;\r\n      let prevPoint = userSnap.data().point || 0;\r\n      // ポイント減算（使った分を引く）\r\n      if (usePoint > 0) {\r\n        prevPoint = Math.max(0, prevPoint - usePoint);\r\n        await updateDoc(userRef, { point: prevPoint });\r\n        console.log('ポイント使用:', usePoint, '残:', prevPoint);\r\n      }\r\n      // ポイント付与（支払金額-送料の100円ごとに1pt）\r\n      let addPoint = 0;\r\n      if (paidAmount > 0) {\r\n        const paidWithoutShipping = Math.max(0, paidAmount - shipping);\r\n        addPoint = Math.floor(paidWithoutShipping / 100);\r\n        await updateDoc(userRef, { point: prevPoint + addPoint });\r\n        console.log('ポイント付与:', addPoint, '合計:', prevPoint + addPoint);\r\n        prevPoint = prevPoint + addPoint;\r\n      }\r\n      // 購入履歴追加\r\n      if (orderItems.length > 0) {\r\n        const prevOrders = userSnap.data().orders || [];\r\n        const now = new Date();\r\n        const orderRecord = {\r\n          date: now.toISOString(),\r\n          items: orderItems,\r\n          total: paidAmount,\r\n          usedPoint: usePoint,\r\n          shipping: shipping,\r\n          grantedPoint: addPoint\r\n        };\r\n        await updateDoc(userRef, { orders: [...prevOrders, orderRecord] });\r\n        console.log('購入履歴追加:', orderRecord);\r\n      }\r\n      // ポイント付与・履歴追加後はlocalStorageをクリア\r\n      localStorage.removeItem('mcSquareLastPaidAmount');\r\n      localStorage.removeItem('mcSquareUsePoint');\r\n      localStorage.removeItem('mcSquareLastOrderItems');\r\n      localStorage.removeItem('mcSquareLastShipping');\r\n      localStorage.setItem('mcSquarePointGranted', '1'); // フラグを立てる\r\n    } catch (e) {\r\n      console.error('ポイント付与・履歴追加エラー:', e);\r\n    }\r\n  };\r\n\r\n  // 必要な情報が全て揃ったら履歴保存\r\n  useEffect(() => {\r\n    // ポイント付与・履歴追加フラグをリセット（決済ごとに必ずリセット）\r\n    localStorage.removeItem('mcSquarePointGranted');\r\n    if (localStorage.getItem('mcSquarePointGranted') === '1') {\r\n      clearCart();\r\n      localStorage.removeItem('mcSquareLastPaidAmount');\r\n      return;\r\n    }\r\n    clearCart();\r\n    // 全ての値が揃っているかチェック\r\n    if (\r\n      orderItems.length > 0 &&\r\n      paidAmount !== null &&\r\n      shipping !== null &&\r\n      usePoint !== null\r\n    ) {\r\n      if (auth.currentUser) {\r\n        grantPointsAndSaveOrder(auth.currentUser);\r\n      } else {\r\n        const unsubscribe = onAuthStateChanged(auth, user => {\r\n          if (user) {\r\n            grantPointsAndSaveOrder(user);\r\n            unsubscribe();\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }, [clearCart, orderItems, paidAmount, usePoint, shipping]);\r\n\r\n  // 小計計算\r\n  const subtotal = orderItems.reduce((sum, item) => {\r\n    const priceNum = Number(String(item.price).replace(/[^\\d.]/g, ''));\r\n    return sum + priceNum * item.quantity;\r\n  }, 0);\r\n\r\n  // 画像パス正規化\r\n  const getImageSrc = (url?: string) => {\r\n    if (!url) return '/Image/MC square Logo.png';\r\n    if (url.startsWith('http://') || url.startsWith('https://')) return url;\r\n    if (url.startsWith('/Image/')) return url;\r\n    if (url.startsWith('Image/')) return '/' + url;\r\n    return '/Image/MC square Logo.png';\r\n  };\r\n\r\n  return (\r\n    <div style={{ padding: '3em 1em', textAlign: 'center' }}>\r\n      <h1 style={{ color: '#E1306C', marginBottom: '1em' }}>ご購入ありがとうございました！</h1>\r\n      <p>ご注文が正常に完了しました。<br />ご登録のメールアドレスに確認メールをお送りしています。</p>\r\n      \r\n      {/* 購入商品リスト表示 */}\r\n      {orderItems.length > 0 && (\r\n        <div style={{ margin: '2em auto', maxWidth: 600, background: '#fff', borderRadius: 16, boxShadow: '0 4px 16px rgba(255,159,124,0.10)', padding: '2em' }}>\r\n          <h3 style={{ color: '#E1306C', marginBottom: 16, fontSize: '1.15em' }}>ご購入商品</h3>\r\n          \r\n          {/* 商品リスト */}\r\n          <ul style={{ listStyle: 'none', padding: 0, margin: 0, marginBottom: '1.5em' }}>\r\n            {orderItems.map((item, idx) => (\r\n              <li key={idx} style={{ display: 'flex', alignItems: 'center', gap: 14, marginBottom: 18, borderBottom: '1px solid #eee', paddingBottom: 10 }}>\r\n                <img src={getImageSrc(item.imageUrl)} alt={item.name} style={{ width: 48, height: 48, objectFit: 'cover', borderRadius: 8, border: '1px solid #eee', background: '#fafafa' }} />\r\n                <div style={{ flex: 1, textAlign: 'left' }}>\r\n                  <div style={{ fontWeight: 700 }}>{item.name}</div>\r\n                  <div style={{ color: '#636E72', fontSize: '0.97em' }}>数量: {item.quantity}　単価: {Number(item.price).toLocaleString()}円</div>\r\n                </div>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n\r\n          {/* 金額詳細 */}\r\n          <div style={{ borderTop: '2px solid #eee', paddingTop: '1em' }}>\r\n            <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '0.5em', fontSize: '1em' }}>\r\n              <span>小計:</span>\r\n              <span>{subtotal.toLocaleString()}円</span>\r\n            </div>\r\n            <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '0.5em', fontSize: '1em' }}>\r\n              <span>送料:</span>\r\n              <span>{shipping === 0 ? '無料' : shipping.toLocaleString() + '円'}</span>\r\n            </div>\r\n            {usePoint > 0 && (\r\n              <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '0.5em', fontSize: '1em', color: '#E1306C' }}>\r\n                <span>ポイント使用:</span>\r\n                <span>-{usePoint.toLocaleString()}円</span>\r\n              </div>\r\n            )}\r\n            <div style={{ display: 'flex', justifyContent: 'space-between', marginTop: '1em', fontWeight: 700, fontSize: '1.15em', color: '#E1306C', borderTop: '1px solid #eee', paddingTop: '0.5em' }}>\r\n              <span>お支払い合計:</span>\r\n              <span>{paidAmount.toLocaleString()}円</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      \r\n      <a href=\"/all-products\" style={{ display: 'inline-block', marginTop: '2em', color: '#fff', background: '#E1306C', padding: '0.8em 2em', borderRadius: 8, textDecoration: 'none', fontWeight: 700 }}>商品一覧へ戻る</a>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Success; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}